{"ast":null,"code":"import _regeneratorRuntime from\"/Users/vazgenzadayan/Documents/Projects/online_shop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/vazgenzadayan/Documents/Projects/online_shop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/vazgenzadayan/Documents/Projects/online_shop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{PRODUCT_UPDATE_RESET}from'store/constants/productConstants';import{listProductDetails,updateProduct}from'store/actions/productActions';import Loader from'components/Loader';import Box from'@mui/material/Box';import Grid from'@mui/material/Grid';import Input from'@mui/material/Input';import Avatar from'@mui/material/Avatar';import Button from'@mui/material/Button';import TextField from'@mui/material/TextField';import Container from'@mui/material/Container';import LockOutlinedIcon from'@mui/icons-material/LockOutlined';import imaage from'assets/detailBackground.jpg';import axios from'axios';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductEditScreen=function ProductEditScreen(_ref){var match=_ref.match,history=_ref.history;var classes=useStyles();var productId=match.params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),image=_useState6[0],setImage=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),brand=_useState8[0],setBrand=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),category=_useState10[0],setCategory=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),countInStock=_useState12[0],setCountInStock=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),description=_useState14[0],setDescription=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),uploading=_useState16[0],setUploading=_useState16[1];var dispatch=useDispatch();var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;var productUpdate=useSelector(function(state){return state.productUpdate;});var loadingUpdate=productUpdate.loading,errorUpdate=productUpdate.error,successUpdate=productUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:PRODUCT_UPDATE_RESET});history.push('/admin/productList');}else{if(!product.name||product._id!==productId){dispatch(listProductDetails(productId));}else{setName(product.name);setPrice(product.price);setImage(product.image);setBrand(product.brand);setCategory(product.category);setCountInStock(product.countInStock);setDescription(product.description);}}},[product,dispatch,productId,history,successUpdate]);var uploadFileHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var formData,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();formData=new FormData();formData.append('image',image);_context.prev=3;config={headers:{'Content-Type':\"multipart/form-data\"}};_context.next=7;return axios.post('/api/upload',formData,config);case 7:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setImage(data);setUploading(false);_context.next=16;break;case 13:_context.prev=13;_context.t0=_context[\"catch\"](3);setUploading(false);case 16:case\"end\":return _context.stop();}}},_callee,null,[[3,13]]);}));return function uploadFileHandler(_x){return _ref2.apply(this,arguments);};}();var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateProduct({_id:productId,name:name,price:price,image:image,brand:brand,category:category,countInStock:countInStock,description:description}));};return/*#__PURE__*/_jsx(Container,{className:classes.container,style:{background:\"url(\".concat(imaage,\") no-repeat center/cover\")},children:/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"xs\",className:classes.formController,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'secondary.main',borderRadius:'0'},className:classes.logo,children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(\"h3\",{className:classes.title,children:\"Edit Product\"}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,sx:{mt:3},children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{autoComplete:\"given-name\",name:\"firstName\",required:true,fullWidth:true,id:\"firstName\",label:\"\\u0418\\u043C\\u044F\",type:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);},autoFocus:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"price\",label:\"\\u0426\\u0435\\u043D\\u0430\",type:\"number\",name:\"price\",autoComplete:\"price\",value:price,onChange:function onChange(e){return setPrice(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"contained-button-file\",children:[/*#__PURE__*/_jsx(Input,{accept:\"image/*\",id:\"contained-button-file\",multiple:true,type:\"file\",onChange:function onChange(e){return setImage(e.target.files[0]);}}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",component:\"span\",onClick:uploadFileHandler,children:\"Upload\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"brand\",label:\"Brand\",type:\"text\",name:\"brand\",autoComplete:\"brand\",value:brand,onChange:function onChange(e){return setBrand(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"countInStock\",label:\"countInStock\",type:\"number\",name:\"countInStock\",autoComplete:\"countInStock\",value:countInStock,onChange:function onChange(e){return setCountInStock(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"category\",label:\"category\",type:\"text\",name:\"category\",autoComplete:\"category\",value:category,onChange:function onChange(e){return setCategory(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"description\",label:\"description\",type:\"text\",name:\"description\",autoComplete:\"description\",value:description,onChange:function onChange(e){return setDescription(e.target.value);}})})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,onClick:submitHandler,variant:\"link\",style:{width:'100%',marginTop:'30px'},children:\"Update\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"link\",component:Link,to:\"/admin/productList\",style:{width:'100%',marginTop:'30px'},children:\"Go Back\"})]})]})})});};export default ProductEditScreen;","map":{"version":3,"sources":["/Users/vazgenzadayan/Documents/Projects/online_shop/frontend/src/screens/ProductEditScreen/ProductEditScreen.jsx"],"names":["React","useState","useEffect","Link","useDispatch","useSelector","PRODUCT_UPDATE_RESET","listProductDetails","updateProduct","Loader","Box","Grid","Input","Avatar","Button","TextField","Container","LockOutlinedIcon","imaage","axios","useStyles","ProductEditScreen","match","history","classes","productId","params","id","name","setName","price","setPrice","image","setImage","brand","setBrand","category","setCategory","countInStock","setCountInStock","description","setDescription","uploading","setUploading","dispatch","productDetails","state","loading","error","product","productUpdate","loadingUpdate","errorUpdate","successUpdate","success","type","push","_id","uploadFileHandler","e","preventDefault","formData","FormData","append","config","headers","post","data","submitHandler","container","background","formController","display","flexDirection","alignItems","bgcolor","borderRadius","logo","title","mt","target","value","files","width","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { PRODUCT_UPDATE_RESET } from 'store/constants/productConstants';\nimport { listProductDetails, updateProduct } from 'store/actions/productActions';\n\nimport Loader from 'components/Loader';\n\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\nimport Input from '@mui/material/Input';\nimport Avatar from '@mui/material/Avatar';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Container from '@mui/material/Container';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\n\nimport imaage from 'assets/detailBackground.jpg';\n\nimport axios from 'axios';\n\nimport useStyles from './styles';\n\nconst ProductEditScreen = ({ match, history }) => {\n  const classes = useStyles();\n\n  const productId = match.params.id;\n\n  const [name, setName] = useState('');\n  const [price, setPrice] = useState(0);\n  const [image, setImage] = useState('');\n  const [brand, setBrand] = useState('');\n  const [category, setCategory] = useState('');\n  const [countInStock, setCountInStock] = useState(0);\n  const [description, setDescription] = useState('');\n  const [uploading, setUploading] = useState(false);\n\n  const dispatch = useDispatch();\n\n  const productDetails = useSelector(state => state.productDetails);\n  const { loading, error, product } = productDetails;\n\n  const productUpdate = useSelector(state => state.productUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate,\n  } = productUpdate;\n\n  useEffect(() => {\n    if (successUpdate) {\n      dispatch({ type: PRODUCT_UPDATE_RESET });\n      history.push('/admin/productList');\n    } else {\n      if (!product.name || product._id !== productId) {\n        dispatch(listProductDetails(productId));\n      } else {\n        setName(product.name);\n        setPrice(product.price);\n        setImage(product.image);\n        setBrand(product.brand);\n        setCategory(product.category);\n        setCountInStock(product.countInStock);\n        setDescription(product.description);\n      }\n    }\n  }, [product, dispatch, productId, history, successUpdate]);\n\n  const uploadFileHandler = async e => {\n    e.preventDefault()\n    const formData = new FormData();\n    formData.append('image', image);\n\n    try {\n      const config = {\n        headers: {\n          'Content-Type': `multipart/form-data`,\n        },\n      };\n\n      const { data } = await axios.post(\n        '/api/upload',\n        formData,\n        config\n      );\n      setImage(data)\n      setUploading(false);\n    } catch (error) {\n      setUploading(false);\n    }\n  };\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(\n      updateProduct({\n        _id: productId,\n        name,\n        price,\n        image,\n        brand,\n        category,\n        countInStock,\n        description,\n      })\n    );\n  };\n\n  return (\n    <Container\n      className={classes.container}\n      style={{ background: `url(${imaage}) no-repeat center/cover` }}\n    >\n      <Container\n        component='main'\n        maxWidth='xs'\n        className={classes.formController}\n      >\n        <Box\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <Avatar\n            sx={{ bgcolor: 'secondary.main', borderRadius: '0' }}\n            className={classes.logo}\n          >\n            <LockOutlinedIcon />\n          </Avatar>\n          <h3 className={classes.title}>Edit Product</h3>\n          {loadingUpdate && <Loader />}\n          {loading ? (\n            <Loader />\n          ) : (\n            <Box component='form' noValidate sx={{ mt: 3 }}>\n              <Grid container spacing={2}>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    autoComplete='given-name'\n                    name='firstName'\n                    required\n                    fullWidth\n                    id='firstName'\n                    label='Имя'\n                    type='name'\n                    value={name}\n                    onChange={e => setName(e.target.value)}\n                    autoFocus\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    required\n                    fullWidth\n                    id='price'\n                    label='Цена'\n                    type='number'\n                    name='price'\n                    autoComplete='price'\n                    value={price}\n                    onChange={e => setPrice(e.target.value)}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <label htmlFor='contained-button-file'>\n                    <Input\n                      accept='image/*'\n                      id='contained-button-file'\n                      multiple\n                      type='file'\n                      onChange={(e) => setImage(e.target.files[0])}\n                    />\n                    <Button\n                    variant='contained'\n                    component='span'\n                    onClick={uploadFileHandler}\n                    >\n                      Upload\n                    </Button>\n                  </label>\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    required\n                    fullWidth\n                    id='brand'\n                    label='Brand'\n                    type='text'\n                    name='brand'\n                    autoComplete='brand'\n                    value={brand}\n                    onChange={e => setBrand(e.target.value)}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    required\n                    fullWidth\n                    id='countInStock'\n                    label='countInStock'\n                    type='number'\n                    name='countInStock'\n                    autoComplete='countInStock'\n                    value={countInStock}\n                    onChange={e => setCountInStock(e.target.value)}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    required\n                    fullWidth\n                    id='category'\n                    label='category'\n                    type='text'\n                    name='category'\n                    autoComplete='category'\n                    value={category}\n                    onChange={e => setCategory(e.target.value)}\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    required\n                    fullWidth\n                    id='description'\n                    label='description'\n                    type='text'\n                    name='description'\n                    autoComplete='description'\n                    value={description}\n                    onChange={e => setDescription(e.target.value)}\n                  />\n                </Grid>\n              </Grid>\n              <Button\n                type='submit'\n                fullWidth\n                onClick={submitHandler}\n                variant='link'\n                style={{ width: '100%', marginTop: '30px' }}\n              >\n                Update\n              </Button>\n              <Button\n                fullWidth\n                variant='link'\n                component={Link}\n                to='/admin/productList'\n                style={{ width: '100%', marginTop: '30px' }}\n              >\n                Go Back\n              </Button>\n            </Box>\n          )}\n        </Box>\n      </Container>\n    </Container>\n  );\n};\n\nexport default ProductEditScreen;\n"]},"metadata":{},"sourceType":"module"}
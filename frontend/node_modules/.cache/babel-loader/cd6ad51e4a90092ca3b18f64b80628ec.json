{"ast":null,"code":"import _slicedToArray from\"/Users/vazgenzadayan/Documents/Projects/online_shop/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{getUserDetails,updateUser}from'store/actions/userActions';import{USER_UPDATE_RESET}from'store/constants/userConstants';import Loader from'components/Loader';import Message from'components/Message';import Box from'@mui/material/Box';import Grid from'@mui/material/Grid';import Switch from'@mui/material/Switch';import Avatar from'@mui/material/Avatar';import Button from'@mui/material/Button';import TextField from'@mui/material/TextField';import Container from'@mui/material/Container';import LockOutlinedIcon from'@mui/icons-material/LockOutlined';import image from'assets/detailBackground.jpg';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserEditScreen=function UserEditScreen(_ref){var match=_ref.match,history=_ref.history;var classes=useStyles();var userId=match.params.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAdmin=_useState6[0],setIsAdmin=_useState6[1];var dispatch=useDispatch();var userDetails=useSelector(function(state){return state.userDetails;});var loading=userDetails.loading,error=userDetails.error,user=userDetails.user;var userUpdate=useSelector(function(state){return state.userUpdate;});var loadingUpdate=userUpdate.loading,errorUpdate=userUpdate.error,successUpdate=userUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:USER_UPDATE_RESET});history.push('/admin/userList');}else{if(!user.name||user._id!==userId){dispatch(getUserDetails(userId));}else{setName(user.name);setEmail(user.email);setIsAdmin(user.isAdmin);}}},[user,dispatch,userId,successUpdate,history]);var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateUser({_id:userId,name:name,email:email,isAdmin:isAdmin}));};return/*#__PURE__*/_jsx(Container,{className:classes.container,style:{background:\"url(\".concat(image,\") no-repeat center/cover\")},children:/*#__PURE__*/_jsx(Container,{component:\"main\",maxWidth:\"xs\",className:classes.formController,children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',flexDirection:'column',alignItems:'center'},children:[/*#__PURE__*/_jsx(Avatar,{sx:{bgcolor:'secondary.main',borderRadius:'0'},className:classes.logo,children:/*#__PURE__*/_jsx(LockOutlinedIcon,{})}),/*#__PURE__*/_jsx(\"h3\",{className:classes.title,children:\"Edit User\"}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),errorUpdate&&/*#__PURE__*/_jsx(Message,{children:errorUpdate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{children:error}):/*#__PURE__*/_jsxs(Box,{component:\"form\",noValidate:true,onSubmit:submitHandler,sx:{mt:3},children:[/*#__PURE__*/_jsxs(Grid,{container:true,spacing:2,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{autoComplete:\"given-name\",name:\"firstName\",required:true,fullWidth:true,id:\"firstName\",label:\"\\u0418\\u043C\\u044F\",type:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);},autoFocus:true})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{required:true,fullWidth:true,id:\"email\",label:\"Email \\u0410\\u0434\\u0440\\u0435\\u0441\",type:\"email\",name:\"email\",autoComplete:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(Switch,{label:\"isAdmin\",checked:isAdmin,onClick:function onClick(e){return setIsAdmin(e.target.checked);}})})]}),/*#__PURE__*/_jsx(Button,{type:\"submit\",fullWidth:true,variant:\"link\",style:{width:'100%',marginTop:'30px'},children:\"Update\"}),/*#__PURE__*/_jsx(Button,{fullWidth:true,variant:\"link\",component:Link,to:\"/admin/userList\",style:{width:'100%',marginTop:'30px'},children:\"Go Back\"})]})]})})});};export default UserEditScreen;","map":{"version":3,"sources":["/Users/vazgenzadayan/Documents/Projects/online_shop/frontend/src/screens/UserEditScreen/UserEditScreen.jsx"],"names":["React","useState","useEffect","Link","useDispatch","useSelector","getUserDetails","updateUser","USER_UPDATE_RESET","Loader","Message","Box","Grid","Switch","Avatar","Button","TextField","Container","LockOutlinedIcon","image","useStyles","UserEditScreen","match","history","classes","userId","params","id","name","setName","email","setEmail","isAdmin","setIsAdmin","dispatch","userDetails","state","loading","error","user","userUpdate","loadingUpdate","errorUpdate","successUpdate","success","type","push","_id","submitHandler","e","preventDefault","container","background","formController","display","flexDirection","alignItems","bgcolor","borderRadius","logo","title","mt","target","value","checked","width","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { getUserDetails, updateUser } from 'store/actions/userActions';\nimport { USER_UPDATE_RESET } from 'store/constants/userConstants';\n\nimport Loader from 'components/Loader';\nimport Message from 'components/Message';\n\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\nimport Switch from '@mui/material/Switch';\nimport Avatar from '@mui/material/Avatar';\nimport Button from '@mui/material/Button';\nimport TextField from '@mui/material/TextField';\nimport Container from '@mui/material/Container';\nimport LockOutlinedIcon from '@mui/icons-material/LockOutlined';\n\nimport image from 'assets/detailBackground.jpg';\n\nimport useStyles from './styles';\n\nconst UserEditScreen = ({ match, history }) => {\n  const classes = useStyles();\n\n  const userId = match.params.id;\n\n  const [name, setName] = useState('');\n  const [email, setEmail] = useState('');\n  const [isAdmin, setIsAdmin] = useState(false);\n\n  const dispatch = useDispatch();\n\n  const userDetails = useSelector(state => state.userDetails);\n  const { loading, error, user } = userDetails;\n\n  const userUpdate = useSelector(state => state.userUpdate);\n  const { loading: loadingUpdate, error: errorUpdate, success:successUpdate } = userUpdate;\n\n  useEffect(() => {\n    if(successUpdate) {\n      dispatch({ type: USER_UPDATE_RESET });\n      history.push('/admin/userList');\n    } else {\n      if(!user.name || user._id !== userId) {\n        dispatch(getUserDetails(userId));\n      } else {\n        setName(user.name);\n        setEmail(user.email);\n        setIsAdmin(user.isAdmin)\n      }\n    }\n  }, [user, dispatch, userId, successUpdate, history]);\n\n  const submitHandler = e => {\n    e.preventDefault();\n    dispatch(updateUser({ _id:userId, name, email, isAdmin}))\n  };\n\n  return (\n    <Container\n      className={classes.container}\n      style={{ background: `url(${image}) no-repeat center/cover` }}\n    >\n      <Container\n        component='main'\n        maxWidth='xs'\n        className={classes.formController}\n      >\n        <Box\n          sx={{\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <Avatar\n            sx={{ bgcolor: 'secondary.main', borderRadius: '0' }}\n            className={classes.logo}\n          >\n            <LockOutlinedIcon />\n          </Avatar>\n          <h3 className={classes.title}>Edit User</h3>\n          {loadingUpdate && <Loader/>}\n          {errorUpdate && <Message>{errorUpdate}</Message>}\n          {loading ? (\n            <Loader />\n          ) : error ? (\n            <Message>{error}</Message>\n          ) : (\n            <Box\n              component='form'\n              noValidate\n              onSubmit={submitHandler}\n              sx={{ mt: 3 }}\n            >\n              <Grid container spacing={2}>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    autoComplete='given-name'\n                    name='firstName'\n                    required\n                    fullWidth\n                    id='firstName'\n                    label='Имя'\n                    type='name'\n                    value={name}\n                    onChange={e => setName(e.target.value)}\n                    autoFocus\n                  />\n                </Grid>\n                <Grid item xs={12} sm={6}>\n                  <TextField\n                    required\n                    fullWidth\n                    id='email'\n                    label='Email Адрес'\n                    type='email'\n                    name='email'\n                    autoComplete='email'\n                    value={email}\n                    onChange={e => setEmail(e.target.value)}\n                  />\n                </Grid>\n                <Grid item xs={12}>\n                <Switch\n                  label='isAdmin'\n                  checked={isAdmin}\n                  onClick={(e) => setIsAdmin(e.target.checked)}\n                 />\n                </Grid>\n              </Grid>\n              <Button\n                type='submit'\n                fullWidth\n                variant='link'\n                style={{ width: '100%', marginTop: '30px' }}\n              >\n                Update\n              </Button>\n              <Button\n                fullWidth\n                variant='link'\n                component={Link}\n                to='/admin/userList'\n                style={{ width: '100%', marginTop: '30px' }}\n              >\n                Go Back\n              </Button>\n            </Box>\n          )}\n        </Box>\n      </Container>\n    </Container>\n  );\n};\n\nexport default UserEditScreen;\n"]},"metadata":{},"sourceType":"module"}
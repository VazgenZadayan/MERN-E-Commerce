{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{listUsers,deleteUser}from'store/actions/userActions';import Loader from'components/Loader';import Message from'components/Message';import Table from'@mui/material/Table';import Button from'@mui/material/Button';import TableRow from'@mui/material/TableRow';import Container from'@mui/material/Container';import TableHead from'@mui/material/TableHead';import TableCell from'@mui/material/TableCell';import TableBody from'@mui/material/TableBody';import Typography from'@mui/material/Typography';import image from'assets/detailBackground.jpg';import useStyles from'./styles';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var UserList=function UserList(_ref){var location=_ref.location,history=_ref.history;var classes=useStyles();var dispatch=useDispatch();var userList=useSelector(function(state){return state.userList;});var loading=userList.loading,error=userList.error,users=userList.users;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;var userDelete=useSelector(function(state){return state.userDelete;});var successDelete=userDelete.success;useEffect(function(){if(userInfo&&userInfo.isAdmin){dispatch(listUsers());}else{history.push('/login');}},[dispatch,history,userInfo,successDelete]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure')){dispatch(deleteUser(id));}};return/*#__PURE__*/_jsxs(Container,{md:12,className:classes.container,style:{background:\"url(\".concat(image,\") no-repeat center/cover\")},children:[/*#__PURE__*/_jsx(Typography,{style:{fontSize:'40px',textAlign:'center'},children:\"Users\"}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(Table,{size:\"small\",sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"E-mail\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"Admin\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:users.map(function(user){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user._id}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user.name}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user.email}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:user.isAdmin?/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-check\",style:{color:'green'}}):/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\",style:{color:'red'}})}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[/*#__PURE__*/_jsx(Button,{component:Link,to:\"/admin/user/\".concat(user._id,\"/edit\"),className:\"btn-sm\",variant:\"light\",children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{className:\"btn-sm\",variant:\"light\",onClick:function onClick(){return deleteHandler(user._id);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]},user._id);})})]})]});};export default UserList;","map":{"version":3,"sources":["/Users/vazgenzadayan/Documents/Projects/online_shop/frontend/src/screens/UserListScreen/UserListScreen.jsx"],"names":["React","useEffect","Link","useDispatch","useSelector","listUsers","deleteUser","Loader","Message","Table","Button","TableRow","Container","TableHead","TableCell","TableBody","Typography","image","useStyles","UserList","location","history","classes","dispatch","userList","state","loading","error","users","userLogin","userInfo","userDelete","successDelete","success","isAdmin","push","deleteHandler","id","window","confirm","container","background","fontSize","textAlign","minWidth","map","user","_id","name","email","color"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { listUsers, deleteUser } from 'store/actions/userActions';\n\nimport Loader from 'components/Loader';\nimport Message from 'components/Message';\n\nimport Table from '@mui/material/Table';\nimport Button from '@mui/material/Button';\nimport TableRow from '@mui/material/TableRow';\nimport Container from '@mui/material/Container';\nimport TableHead from '@mui/material/TableHead';\nimport TableCell from '@mui/material/TableCell';\nimport TableBody from '@mui/material/TableBody';\nimport Typography from '@mui/material/Typography';\n\nimport image from 'assets/detailBackground.jpg';\n\nimport useStyles from './styles';\n\nconst UserList = ({ location, history }) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  const userList = useSelector(state => state.userList);\n  const { loading, error, users } = userList;\n\n  const userLogin = useSelector(state => state.userLogin);\n  const { userInfo } = userLogin;\n\n  const userDelete = useSelector(state => state.userDelete);\n  const { success: successDelete } = userDelete;\n\n  useEffect(() => {\n    if(userInfo && userInfo.isAdmin) {\n      dispatch(listUsers());\n    } else {\n      history.push('/login')\n    }\n  }, [dispatch, history, userInfo, successDelete]);\n\n  const deleteHandler = (id) => {\n    if(window.confirm('Are you sure')) {\n      dispatch(deleteUser(id))\n    }\n  }\n \n  return (\n    <Container\n      md={12}\n      className={classes.container}\n      style={{ background: `url(${image}) no-repeat center/cover` }}\n    >\n      <Typography style={{ fontSize: '40px', textAlign: 'center' }}>\n        Users\n      </Typography>\n      {loading ? (\n        <Loader />\n      ) : error ? (\n        <Message variant='danger'>{error}</Message>\n      ) : (\n        <Table size='small' sx={{ minWidth: 650 }} aria-label='simple table'>\n          <TableHead>\n            <TableRow>\n              <TableCell align='center'>ID</TableCell>\n              <TableCell align='center'>Имя</TableCell>\n              <TableCell align='center'>E-mail</TableCell>\n              <TableCell align='center'>Admin</TableCell>\n              <TableCell align='center'></TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {users.map(user => (\n              <TableRow key={user._id}>\n                <TableCell align='center'>{user._id}</TableCell>\n                <TableCell align='center'>\n                  {user.name}\n                </TableCell>\n                <TableCell align='center'>{user.email}</TableCell>\n                <TableCell align='center'>{user.isAdmin ? (\n                  <i className='fas fa-check' style={{color: 'green'}}></i>\n                ) : (\n                  <i className='fas fa-times' style={{color: 'red'}}></i>\n                )}</TableCell>\n                <TableCell align='center'>\n                <Button\n                    component={Link}\n                    to={`/admin/user/${user._id}/edit`}\n                    className='btn-sm'\n                    variant='light'\n                  >\n                   Изменить\n                  </Button>\n                  <Button\n                    className='btn-sm'\n                    variant='light'\n                    onClick={() => deleteHandler(user._id)}\n                  >\n                   Удалить\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      )}\n    </Container>\n  );\n};\n\nexport default UserList;\n"]},"metadata":{},"sourceType":"module"}
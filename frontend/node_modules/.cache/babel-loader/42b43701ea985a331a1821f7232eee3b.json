{"ast":null,"code":"import React,{useEffect}from'react';import{Link}from'react-router-dom';import{useDispatch,useSelector}from'react-redux';import{listProducts,deleteProduct,createProduct}from'store/actions/productActions';import Loader from'components/Loader';import Table from'@mui/material/Table';import Button from'@mui/material/Button';import TableRow from'@mui/material/TableRow';import Container from'@mui/material/Container';import TableHead from'@mui/material/TableHead';import TableCell from'@mui/material/TableCell';import TableBody from'@mui/material/TableBody';import Typography from'@mui/material/Typography';import image from'assets/detailBackground.jpg';import useStyles from'./styles';import{PRODUCT_CREATE_RESET}from'store/constants/productConstants';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductListScreen=function ProductListScreen(_ref){var match=_ref.match,history=_ref.history;var classes=useStyles();var dispatch=useDispatch();var productList=useSelector(function(state){return state.productList;});var loading=productList.loading,error=productList.error,products=productList.products;var productDelete=useSelector(function(state){return state.productDelete;});var loadingDelete=productDelete.loading,errorDelete=productDelete.error,successDelete=productDelete.success;var productCreate=useSelector(function(state){return state.productCreate;});var loadingCreate=productCreate.loading,errorCreate=productCreate.error,successCreate=productCreate.success,createdProduct=productCreate.product;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){dispatch({type:PRODUCT_CREATE_RESET});if(!userInfo.isAdmin){history.push('/login');}if(successCreate){history.push(\"/admin/product/\".concat(createdProduct._id,\"/edit\"));}else{dispatch(listProducts());}},[dispatch,history,userInfo,successDelete,successCreate,createdProduct]);var deleteHandler=function deleteHandler(id){if(window.confirm('Are you sure')){dispatch(deleteProduct(id));}};var createProductHandler=function createProductHandler(){dispatch(createProduct());};return/*#__PURE__*/_jsxs(Container,{md:12,className:classes.container,style:{background:\"url(\".concat(image,\") no-repeat center/cover\")},children:[/*#__PURE__*/_jsx(Typography,{style:{fontSize:'40px',textAlign:'center'},children:\"Products\"}),/*#__PURE__*/_jsx(Button,{variant:\"link\",onClick:createProductHandler,children:\"Create Product\"}),loadingDelete&&/*#__PURE__*/_jsx(Loader,{}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(Table,{size:\"small\",sx:{minWidth:650},\"aria-label\":\"simple table\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"ID\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"\\u0426\\u0435\\u043D\\u0430\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"\\u041A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:\"\\u0411\\u0440\\u0435\\u0434\\u043D\"}),/*#__PURE__*/_jsx(TableCell,{align:\"center\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:products.map(function(product){return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:product._id}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:product.name}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:product.price}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:product.category}),/*#__PURE__*/_jsx(TableCell,{align:\"center\",children:product.brand}),/*#__PURE__*/_jsxs(TableCell,{align:\"center\",children:[/*#__PURE__*/_jsx(Button,{component:Link,to:\"/admin/product/\".concat(product._id,\"/edit\"),className:\"btn-sm\",variant:\"light\",children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{className:\"btn-sm\",variant:\"light\",onClick:function onClick(){return deleteHandler(product._id);},children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]},product._id);})})]})]});};export default ProductListScreen;","map":{"version":3,"sources":["/Users/vazgenzadayan/Documents/Projects/online_shop/frontend/src/screens/ProductListScreen/ProductListScreen.jsx"],"names":["React","useEffect","Link","useDispatch","useSelector","listProducts","deleteProduct","createProduct","Loader","Table","Button","TableRow","Container","TableHead","TableCell","TableBody","Typography","image","useStyles","PRODUCT_CREATE_RESET","ProductListScreen","match","history","classes","dispatch","productList","state","loading","error","products","productDelete","loadingDelete","errorDelete","successDelete","success","productCreate","loadingCreate","errorCreate","successCreate","createdProduct","product","userLogin","userInfo","type","isAdmin","push","_id","deleteHandler","id","window","confirm","createProductHandler","container","background","fontSize","textAlign","minWidth","map","name","price","category","brand"],"mappings":"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","sourcesContent":["import React, { useEffect } from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { useDispatch, useSelector } from 'react-redux';\nimport { listProducts, deleteProduct, createProduct } from 'store/actions/productActions';\n\nimport Loader from 'components/Loader';\n\nimport Table from '@mui/material/Table';\nimport Button from '@mui/material/Button';\nimport TableRow from '@mui/material/TableRow';\nimport Container from '@mui/material/Container';\nimport TableHead from '@mui/material/TableHead';\nimport TableCell from '@mui/material/TableCell';\nimport TableBody from '@mui/material/TableBody';\nimport Typography from '@mui/material/Typography';\n\nimport image from 'assets/detailBackground.jpg';\n\nimport useStyles from './styles';\nimport { PRODUCT_CREATE_RESET } from 'store/constants/productConstants';\n\nconst ProductListScreen = ({ match, history }) => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n\n  const productList = useSelector(state => state.productList);\n  const { loading, error, products } = productList;\n\n  const productDelete = useSelector(state => state.productDelete);\n  const { loading: loadingDelete, error: errorDelete, success: successDelete } = productDelete;\n\n  const productCreate = useSelector(state => state.productCreate);\n  const { loading: loadingCreate, error: errorCreate, success: successCreate, product: createdProduct } = productCreate;\n\n  const userLogin = useSelector(state => state.userLogin);\n  const { userInfo } = userLogin;\n\n  useEffect(() => {\n    dispatch({ type: PRODUCT_CREATE_RESET })\n\n    if(!userInfo.isAdmin) {\n      history.push('/login')\n    }\n\n    if(successCreate) {\n      history.push(`/admin/product/${createdProduct._id}/edit`)\n    }else {\n      dispatch(listProducts());\n    }\n  }, [dispatch, history, userInfo, successDelete, successCreate, createdProduct]);\n\n  const deleteHandler = (id) => {\n    if(window.confirm('Are you sure')) {\n      dispatch(deleteProduct(id));\n    }\n  }\n\n  const createProductHandler = () => {\n    dispatch(createProduct())\n  }\n \n  return (\n    <Container\n      md={12}\n      className={classes.container}\n      style={{ background: `url(${image}) no-repeat center/cover` }}\n    >\n      <Typography style={{ fontSize: '40px', textAlign: 'center' }}>\n        Products\n      </Typography>\n      <Button variant='link' onClick={createProductHandler}>\n          Create Product\n      </Button>\n      {loadingDelete && <Loader/>}\n      {loadingCreate && <Loader/>}\n      {loading ? (\n        <Loader />\n      ) : (\n        <Table size='small' sx={{ minWidth: 650 }} aria-label='simple table'>\n          <TableHead>\n            <TableRow>\n              <TableCell align='center'>ID</TableCell>\n              <TableCell align='center'>Название</TableCell>\n              <TableCell align='center'>Цена</TableCell>\n              <TableCell align='center'>Категория</TableCell>\n              <TableCell align='center'>Бредн</TableCell>\n              <TableCell align='center'></TableCell>\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {products.map(product => (\n              <TableRow key={product._id}>\n                <TableCell align='center'>{product._id}</TableCell>\n                <TableCell align='center'>\n                  {product.name}\n                </TableCell>\n                <TableCell align='center'>{product.price}</TableCell>\n                <TableCell align='center'>{product.category}</TableCell>\n                <TableCell align='center'>{product.brand}</TableCell>\n                <TableCell align='center'>\n                <Button\n                    component={Link}\n                    to={`/admin/product/${product._id}/edit`}\n                    className='btn-sm'\n                    variant='light'\n                  >\n                   Изменить\n                  </Button>\n                  <Button\n                    className='btn-sm'\n                    variant='light'\n                    onClick={() => deleteHandler(product._id)}\n                  >\n                   Удалить\n                  </Button>\n                </TableCell>\n              </TableRow>\n            ))}\n          </TableBody>\n        </Table>\n      )}\n    </Container>\n  );\n};\n\nexport default ProductListScreen;\n"]},"metadata":{},"sourceType":"module"}